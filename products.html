<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="public/css/style.css" />
    <link rel="stylesheet" href="public/css/products.css" />
    <title>B√°nh M√¨ Shop</title>
  </head>
  <body>
      <header class="main-header">
      <nav class="nav-bar">
        <h1 class="shop-name">B√°nh M√¨ Express</h1>
        <div class="nav-items">
          <div class="search-box">
            <i class="search-icon">üîç</i>
            <input type="text" placeholder="T√¨m ki·∫øm b√°nh m√¨..." />
          </div>
          <select class="category-filter">
            <option value="all">T·∫•t c·∫£</option>
            <option value="traditional">Truy·ªÅn th·ªëng</option>
            <option value="premium">Cao c·∫•p</option>
            <option value="vegetarian">Chay</option>
          </select>
          <button class="cart-btn">
            Gi·ªè h√†ng
            <span class="cart-count">0</span>
          </button>
          <button class="profile-btn">
            <span class="username">User</span>
          </button>
        </div>
      </nav>
    </header>    <main class="shop-content">
      <section class="hero">
        <h2 class="hero-title">B√°nh M√¨ T∆∞∆°i M·ªói Ng√†y</h2>
        <p class="hero-subtitle">ƒê·∫∑t h√†ng online - Nh·∫≠n b√°nh trong 30 ph√∫t</p>
      </section>

      <section class="products">
        <div class="product-grid">
          <!-- B√°nh m√¨ th·ªãt -->
          <article class="product-card" data-id="1">
            <div class="product-image">
              <img src="public/images/banh-mi-thit.jpg" alt="B√°nh M√¨ Th·ªãt Ngu·ªôi" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ Th·ªãt Ngu·ªôi</h3>
              <p class="description">Th·ªãt ngu·ªôi, pate th∆°m, rau s·ªëng, d∆∞a chua, ·ªõt t∆∞∆°i</p>
              <div class="price-row">
                <span class="price">25.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ x√≠u m·∫°i -->
          <article class="product-card" data-id="2">
            <div class="product-image">
              <img src="public/images/banh-mi-xiu-mai.jpg" alt="B√°nh M√¨ X√≠u M·∫°i" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ X√≠u M·∫°i</h3>
              <p class="description">X√≠u m·∫°i n√≥ng h·ªïi, n∆∞·ªõc s·ªët ƒë·∫∑c bi·ªát, rau th∆°m</p>
              <div class="price-row">
                <span class="price">30.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ th·ªãt n∆∞·ªõng -->
          <article class="product-card" data-id="3">
            <div class="product-image">
              <img src="public/images/banh-mi-thit-nuong.jpg" alt="B√°nh M√¨ Th·ªãt N∆∞·ªõng" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ Th·ªãt N∆∞·ªõng</h3>
              <p class="description">Th·ªãt n∆∞·ªõng ∆∞·ªõp s·∫£, ƒë·ªì chua, rau th∆°m, s·ªët t∆∞∆°ng ƒë·∫∑c bi·ªát</p>
              <div class="price-row">
                <span class="price">28.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ g√† -->
          <article class="product-card" data-id="4">
            <div class="product-image">
              <img src="public/images/banh-mi-ga.jpg" alt="B√°nh M√¨ G√†" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ G√†</h3>
              <p class="description">G√† x√©, s·ªët mayo, rau th∆°m, d∆∞a leo</p>
              <div class="price-row">
                <span class="price">28.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ ch·∫£ c√° -->
          <article class="product-card" data-id="5">
            <div class="product-image">
              <img src="public/images/banh-mi-cha-ca.jpg" alt="B√°nh M√¨ Ch·∫£ C√°" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ Ch·∫£ C√°</h3>
              <p class="description">Ch·∫£ c√° chi√™n gi√≤n, s·ªët t∆∞∆°ng, rau th∆°m</p>
              <div class="price-row">
                <span class="price">25.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ chay -->
          <article class="product-card" data-id="6">
            <div class="product-image">
              <img src="public/images/banh-mi-chay.jpg" alt="B√°nh M√¨ Chay" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ Chay</h3>
              <p class="description">ƒê·∫≠u h≈© chi√™n, n·∫•m x√†o, rau c·ªß t∆∞∆°i</p>
              <div class="price-row">
                <span class="price">22.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ ƒë·∫∑c bi·ªát -->
          <article class="product-card" data-id="7">
            <div class="product-image">
              <img src="public/images/banh-mi-dac-biet.jpg" alt="B√°nh M√¨ ƒê·∫∑c Bi·ªát" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ ƒê·∫∑c Bi·ªát</h3>
              <p class="description">Th·ªãt ngu·ªôi, x√° x√≠u, tr·ª©ng ·ªëp la, pate, rau s·ªëng</p>
              <div class="price-row">
                <span class="price">35.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>

          <!-- B√°nh m√¨ b√≤ kho -->
          <article class="product-card" data-id="8">
            <div class="product-image">
              <img src="public/images/banh-mi-bo-kho.jpg" alt="B√°nh M√¨ B√≤ Kho" />
            </div>
            <div class="product-info">
              <h3>B√°nh M√¨ B√≤ Kho</h3>
              <p class="description">B√≤ kho n·∫•u m·ªÅm, n∆∞·ªõc s·ªët ƒë·∫≠m ƒë√†, rau th∆°m</p>
              <div class="price-row">
                <span class="price">35.000ƒë</span>
                <button class="add-to-cart">Th√™m v√†o gi·ªè</button>
              </div>
            </div>
          </article>
        </div>
      </section>
    </main>

    <footer class="main-footer">
      <div class="footer-content">
        <div class="contact">
          <h4>Li√™n h·ªá</h4>
          <p>üìû 0123-456-789</p>
          <p>üìç 123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ</p>
        </div>
        <div class="hours">
          <h4>Gi·ªù m·ªü c·ª≠a</h4>
          <p>Th·ª© 2 - Ch·ªß nh·∫≠t: 6:00 - 22:00</p>
        </div>
      </div>
    </footer>

    <!-- Cart Panel -->
    <aside class="cart-panel">
      <div class="cart-header">
        <h3 class="cart-title">Gi·ªè h√†ng</h3>
        <button class="close-cart">√ó</button>
      </div>
      <div class="cart-items">
        <!-- Cart items will be dynamically added here -->
      </div>
      <div class="cart-footer">
        <div class="cart-total">
          <span>T·ªïng c·ªông:</span>
          <span class="total-amount">0ƒë</span>
        </div>
        <button class="checkout-btn">Thanh to√°n</button>
      </div>
    </aside>

    <!-- Toast notifications container -->
    <div id="toast-container"></div>

    <!-- Import modules -->
    <script type="module">
      import { ProductController } from './src/controllers/ProductController.js';
      import { ProductService } from './src/services/ProductService.js';
      import { AuthService } from './src/services/AuthService.js';
      import { Product } from './src/models/Product.js';

      // Initialize services and controllers
      const authService = new AuthService();
      const productService = new ProductService();
      const productController = new ProductController(productService, authService);

      // Check authentication
      if (!authService.isAuthenticated()) {
        window.location.href = 'index.html';
      }

      // Initialize page
      document.addEventListener('DOMContentLoaded', () => {
        // Display user info
        const user = authService.getCurrentUser();
        if (user) {
          document.querySelector('.username').textContent = user.username;
        }

        // Load and display products
        productController.loadProducts();

        // Setup cart panel
        const cartBtn = document.querySelector('.cart-btn');
        const cartPanel = document.querySelector('.cart-panel');
        const closeCart = document.querySelector('.close-cart');

        cartBtn.addEventListener('click', () => {
          cartPanel.classList.add('open');
        });

        closeCart.addEventListener('click', () => {
          cartPanel.classList.remove('open');
        });

        // Setup add to cart buttons
        document.querySelectorAll('.add-to-cart').forEach(button => {
          button.addEventListener('click', async (e) => {
            const productCard = e.target.closest('.product-card');
            const productId = productCard.dataset.id;
            try {
              await productController.addToCart(productId);
              button.classList.add('clicked');
              setTimeout(() => button.classList.remove('clicked'), 300);
            } catch (error) {
              console.error('Failed to add to cart:', error);
            }
          });
        });
      });
    </script>
  </body>
</html>